---
applies_to:
  - "src/i18n/**"
  - "src/app/[lang]/**"
---

# i18n Rules

- **Both languages always** — Every dictionary key must exist in both `en.json` and `fr.json`
- **getDictionary pattern** — Every page calls `const dict = await getDictionary(lang)` to get translated strings
- **Locale type** — Always use `Locale` from `src/types/strapi.ts` (value: `"en" | "fr"`), never raw strings
- **Middleware handles detection** — `src/middleware.ts` reads `Accept-Language` and redirects bare paths to `/{locale}/...`
- **Strapi locale codes** — Strapi is configured with `"en"` and `"fr"` locale codes — no `fr-FR` mapping is needed
- **Cross-locale switching** — Detail pages populate `localizations` from Strapi to resolve the alternate locale's slug. Use `getAlternateSlug()` from `src/lib/i18n-helpers.ts` and `AlternateUrlSetter` from `src/components/AlternateUrlContext.tsx`
- **No hardcoded strings** — All user-facing text must come from dictionaries, not hardcoded in components
- **Key naming** — Use dot-separated nested keys matching the page structure (e.g., `activities.title`, `services.description`)
